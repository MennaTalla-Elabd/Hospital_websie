<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Appointments Reports</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: rgb(218, 218, 255);
        margin: 0;
        padding: 20px;
    }

    h1 {
        text-align: center;
        color: rgb(104, 104, 255);
        margin-bottom: 20px;
    }

    .buttons {
        text-align: center;
        margin-bottom: 20px;
    }

    button {
        padding: 10px 20px;
        margin: 5px;
        border: none;
        border-radius: 6px;
        background-color: #007bff;
        color: white;
        cursor: pointer;
        font-size: 16px;
    }

    button:hover {
        background-color: #0056b3;
    }

    #report {
        background: white;
        padding: 20px;
        border-radius: 10px;
        max-width: 700px;
        margin: 0 auto;
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }

    #report p {
        margin: 8px 0;
        font-size: 16px;
    }

</style>
</head>
<body>

<h1>Appointments Reports</h1>

<div class="buttons">
    <button id="dailyReport">Daily Report</button>
    <button id="weeklyReport">Weekly Report</button>
</div>

<div id="report">
    <p>No report generated yet.</p>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {

    const reportDiv = document.getElementById("report");
    const dailyBtn = document.getElementById("dailyReport");
    const weeklyBtn = document.getElementById("weeklyReport");

    function getAppointments(){
        return JSON.parse(localStorage.getItem("appointments")) || [];
    }
    function showReport(list){
        if(list.length === 0){
            reportDiv.innerHTML = "<p>No appointments found.</p>";
            return;
        }
        reportDiv.innerHTML = "";
        list.forEach(a => {
            reportDiv.innerHTML += `<p>${a.date} ${a.time} - ${a.patient} with Dr. ${a.doctor} (${a.specialtyname})</p>`;
        });
    }
    function getDailyReport(date){
        const appointments = getAppointments();
        return appointments.filter(a => a.date === date);
    }
    function getWeeklyReport(){
        const appointments = getAppointments();
        let now = new Date();
        let firstDay = new Date(now);
        firstDay.setDate(now.getDate() - now.getDay()); 
        let lastDay = new Date(firstDay);
        lastDay.setDate(firstDay.getDate() + 6);

        let firstDayStr = firstDay.toISOString().split('T')[0];
        let lastDayStr = lastDay.toISOString().split('T')[0];

        return appointments.filter(a => {
            return a.date >= firstDayStr && a.date <= lastDayStr;
        });
    }

    dailyBtn.addEventListener("click", function(){
        let today = new Date().toISOString().split('T')[0];
        let daily = getDailyReport(today);
        showReport(daily);
    });

    weeklyBtn.addEventListener("click", function(){
        let weekly = getWeeklyReport();
        showReport(weekly);
    });

});
</script>
</body>
</html>
